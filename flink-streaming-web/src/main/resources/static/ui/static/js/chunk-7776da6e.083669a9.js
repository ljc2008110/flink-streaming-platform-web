(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7776da6e"],{"2dea":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tab-container",attrs:{size:"mini"}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[n("el-form-item",{attrs:{inline:"true"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("钉钉告警 "),n("el-popover",{attrs:{placement:"right",trigger:"hover"}},[n("p",[e._v("钉钉告警所需的url（如果不填写将无法告警）")]),n("p",[e._v("1、目前暂时钉钉群告警且只能添加一个 （当运行的任务挂掉的时候会告警）")]),n("p",[e._v("2、部署的机器需要支持外网否则无法支持钉钉发送")]),n("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),n("el-input",{staticClass:"fl-form-item",attrs:{placeholder:"钉钉告警所需的url"},model:{value:e.form.dingding_alarm_url,callback:function(t){e.$set(e.form,"dingding_alarm_url",t)},expression:"form.dingding_alarm_url"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateConfig("dingding_alarm_url",e.form.dingding_alarm_url)}}},[e._v("提交")]),n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteConfig("dingding_alarm_url")}}},[e._v("删除")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.testalarm("/testDingdingAlert")}}},[e._v("测试一下")])],1),n("el-form-item",{attrs:{inline:"true"}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("自定义回调 "),n("el-popover",{attrs:{placement:"right",trigger:"hover",width:"800"}},[n("p",[e._v("自定义http回调告警")]),n("p",[e._v("1、回调url用于支持用户自定义告警，当任务出现告警时，会通过回调url通知 如 http://127.0.0.1/alarmCallback")]),n("p",[e._v("2、回调url支持post、get请求，请求参数是appId、jobName、deployMode 在自定义开发的时候必须要有这三个请求参数，且URN必须是alarmCallback")]),n("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),n("el-input",{staticClass:"fl-form-item",attrs:{placeholder:"自定义http回调告警"},model:{value:e.form.callback_alarm_url,callback:function(t){e.$set(e.form,"callback_alarm_url",t)},expression:"form.callback_alarm_url"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateConfig("callback_alarm_url",e.form.callback_alarm_url)}}},[e._v("提交")]),n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteConfig("callback_alarm_url")}}},[e._v("删除")]),n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.testalarm("/testHttpAlert")}}},[e._v("测试一下")])],1)],1)],1)},a=[],o=(n("d3b7"),n("159b"),n("da71")),l={name:"AlarmCfg",data:function(){return{loading:!1,form:{dingding_alarm_url:"",callback_alarm_url:""}}},mounted:function(){this.queryConfig()},methods:{queryConfig:function(){var e=this;this.loading=!0,Object(o["a"])().then((function(t){e.loading=!1;var n=t.code,r=t.success,a=t.message,o=t.data;"200"===n&&r?(e.form.dingding_alarm_url="",e.form.callback_alarm_url="",o.forEach((function(t){"dingding_alarm_url"===t.key?e.form.dingding_alarm_url=t.val:"callback_alarm_url"===t.key&&(e.form.callback_alarm_url=t.val)}))):e.$message({type:"error",message:a||"请求数据异常！"})})).catch((function(t){e.loading=!1,e.$message({type:"error",message:"请求异常！"}),console.log(t)}))},updateConfig:function(e,t){var n=this;this.loading=!0,Object(o["e"])(e,t).then((function(e){n.loading=!1;var t=e.code,r=e.success,a=e.message;"200"===t&&r?(n.$message({type:"success",message:"更新成功！"}),n.queryConfig()):n.$message({type:"error",message:a||"请求数据异常！"})})).catch((function(e){n.loading=!1,n.$message({type:"error",message:"请求异常！"}),console.log(e)}))},testalarm:function(e){var t=this;console.log(e),Object(o["d"])(e).then((function(e){var n=e.code,r=e.success,a=e.message;"200"===n&&r?(t.$message({type:"success",message:"测试成功！"}),t.queryConfig()):t.$message({type:"error",message:a||"测试数据异常！"})})).catch((function(e){t.$message({type:"error",message:"测试异常！"}),console.log(e)}))},deleteConfig:function(e){var t=this,n="";"dingding_alarm_url"===e?n="钉钉告警通知配置":"callback_alarm_url"===e&&(n="自定义告警通知配置"),this.$confirm("是否删除".concat(n),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(o["b"])(e).then((function(e){t.loading=!1;var n=e.code,r=e.success,a=e.message;"200"===n&&r?(t.$message({type:"success",message:"删除成功！"}),t.queryConfig()):t.$message({type:"error",message:a||"请求数据异常！"})})).catch((function(e){t.loading=!1,t.$message({type:"error",message:"请求异常！"}),console.log(e)}))}))}}},s=l,i=(n("3771"),n("2877")),c=Object(i["a"])(s,r,a,!1,null,"293c7952",null);t["default"]=c.exports},3662:function(e,t,n){},3771:function(e,t,n){"use strict";n("3662")},da71:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("b775"),a=n("4328"),o=n.n(a);function l(){return Object(r["a"])({url:"/alarmConfig",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return o.a.stringify(e)}],data:{}})}function s(){return Object(r["a"])({url:"/sysConfig",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return o.a.stringify(e)}],data:{}})}function i(e,t){return Object(r["a"])({url:"/upsertSynConfig",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return o.a.stringify(e)}],data:{key:e,val:t}})}function c(e){return Object(r["a"])({url:e,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function u(e){return Object(r["a"])({url:"/deleteConfig",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return o.a.stringify(e)}],data:{key:e}})}}}]);